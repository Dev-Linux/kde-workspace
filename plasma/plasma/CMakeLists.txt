include_directories(${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/workspace/lib)

set(plasma_SRCS
    controlbox.cpp
    coronaview.cpp
    main.cpp
    plasmaapp.cpp
    rootwidget.cpp
)

set(ksmserver_xml ${CMAKE_SOURCE_DIR}/workspace/ksmserver/org.kde.KSMServerInterface.xml)
QT4_ADD_DBUS_INTERFACE(plasma_SRCS ${ksmserver_xml} ksmserver_interface)

kde4_automoc(${plasma_SRCS})
kde4_add_executable(plasma-qgv ${plasma_SRCS})

target_link_libraries(plasma-qgv plasma kworkspace ${KDE4_KDEUI_LIBS} ${KDE4_KIO_LIBS})
set_target_properties(plasma-qgv PROPERTIES OUTPUT_NAME plasma)

install(TARGETS plasma-qgv DESTINATION ${BIN_INSTALL_DIR})
install( FILES plasma.desktop DESTINATION ${AUTOSTART_INSTALL_DIR} )
