kde_module_LTLIBRARIES = kcm_kicker.la

kcm_kicker_la_SOURCES = positiontab.ui hidingtab.ui lookandfeeltab.ui menutab.ui \
			positiontab_impl.cpp hidingtab_impl.cpp lookandfeeltab_impl.cpp \
			menutab_impl.cpp extensionInfo.cpp main.cpp \
                        lookandfeeltab_kcm.cpp advancedOptions.ui advancedDialog.cpp

kcm_kicker_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
kcm_kicker_la_LIBADD =  ../background/libbgnd.la $(LIB_KIO)
INCLUDES= -I$(srcdir)/../background $(all_includes)

kcm_kicker_la_METASOURCES = AUTO

noinst_HEADERS = positiontab_impl.h hidingtab_impl.h lookandfeeltab_impl.h menutab_impl.h \
		extensionInfo.h main.h lookandfeeltab_kcm.h advancedDialog.h

KDE_ICON = kmenu

# Translation of tiles is used by lookandfeeltab_impl.cpp
# Tile names are transformed to words with title case
messages: rc.cpp
	(cd ../../kicker/data/tiles ; ls *_tiny_up.png) | perl -p -e \
	  's/(.*)_tiny_up\.png/i18n\(\"\u$$1\"\)\;/; s/[_ ]+(.)/ \u$$1/g' >> rc.cpp
	$(XGETTEXT) *.cpp -o $(podir)/kcmkicker.pot

xdg_apps_DATA = panel.desktop panel_appearance.desktop 

kcmkicker_data3_DATA = kicker_config.desktop kicker_config_appearance.desktop
kcmkicker_data3dir = $(kde_appsdir)/.hidden

install-data-local: uninstall.desktop
	$(mkinstalldirs) $(DESTDIR)$(kde_appsdir)/Settings/LookNFeel
	$(INSTALL_DATA) $(srcdir)/uninstall.desktop $(DESTDIR)$(kde_appsdir)/Settings/LookNFeel/panel.desktop

EXTRA_DIST = $(kcmkicker_data_DATA)
